<!DOCTYPE html>
<html>
    <head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js"></script>

<style>
    html,body {
        height: 100%; 
        margin: 0px; 
        padding: 0px; 
    }

    #map {
        width: 100%;
        height: 100%;
    }
</style>
</head>
<body>
    <div id="map"></div>
</body>
<script>
    const filteredDataJSON = [];
    const latLngs = [];

    let map;

    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', 
    {
        minZoom: 7,
        maxZoom: 21,
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    });

    const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', 
    {
        minZoom: 7,
        maxZoom: 21,
        attribution: '© <a href="https://www.esri.com/en-us/home">Esri</a>, <a href="https://www.earthstar.com/">Earthstar Geographics</a>, <a href="https://www.maxar.com/">Maxar</a>, <a href="https://www.usda.gov/">USDA</a>, <a href="https://www.usgs.gov/">USGS</a>, <a href="https://www.aex.com/">AEX</a>, <a href="https://www.getmapping.com/">Getmapping</a>, <a href="https://www.aerogrid.com/">Aerogrid</a>, <a href="https://www.ign.fr/">IGN</a>, <a href="https://www.igp.pt/">IGP</a>, and the <a href="https://www.gisusercommunity.com/">GIS User Community</a>'
    });

    const baseMaps = 
    {
        "OpenStreetMap": osm,
        "Esri Satellite": satellite
    };

    function createMap()
    {
        map = map = L.map("map",{zoomControl: false}).setView([47.6965, 13.3457], 7);
        osm.addTo(map);
        L.control.layers(baseMaps).addTo(map);
        L.control.zoom({ position: 'bottomright' }).addTo(map);
    }

    function addDataToMap(dataJSON) {
        let markerLayer = L.layerGroup();

        dataJSON.forEach(entry => {
            let marker = L.circleMarker([entry.Latitude, entry.Longitude], entry.Icon);

            marker.bindPopup(entry.PopUp);
            marker.bindTooltip(entry.ToolTip, {permanent: false, direction: 'top', offset: [0, -8], opacity: 1});
            marker.addTo(markerLayer);
        });

        markerLayer.addTo(map);
        const bounds = L.latLngBounds(latLngs);
        map.fitBounds(bounds.pad(0.2), { maxZoom: 19 });
    }

    createMap();
    addDataToMap(filteredDataJSON);
</script>
</html>